<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartWatch Hub</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <style>
      :root {
        --bg: #0b1220;
        --card: rgba(255, 255, 255, 0.06);
        --card-border: rgba(255, 255, 255, 0.12);
        --text: #eaf0ff;
        --muted: rgba(234, 240, 255, 0.72);
        --brand: #6d5efc;
        --brand2: #19d3ff;
        --radius: 16px;
        --shadow: 0 18px 60px rgba(0, 0, 0, 0.35);
        --danger: #ff4d6d;
        --ok: #2de39a;
      }

      /* Light theme overrides */
      html[data-theme="light"] {
        --bg: #f6f8ff;
        --card: rgba(0, 0, 0, 0.04);
        --card-border: rgba(0, 0, 0, 0.10);
        --text: #07101f;
        --muted: rgba(7, 16, 31, 0.72);
        --shadow: 0 18px 60px rgba(0, 0, 0, 0.12);
      }

      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        color: var(--text);
        background:
          radial-gradient(1100px 700px at 25% -10%, rgba(109, 94, 252, 0.45), transparent 60%),
          radial-gradient(900px 650px at 95% 10%, rgba(25, 211, 255, 0.32), transparent 55%),
          var(--bg);
      }
      a { color: inherit; text-decoration: none; }
      .container { max-width: 1120px; margin: 0 auto; padding: 0 20px; }

      header {
        position: sticky; top: 0; z-index: 10;
        backdrop-filter: blur(10px);
        background: rgba(11, 18, 32, 0.7);
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      }
      .nav { display: flex; align-items: center; justify-content: space-between; padding: 16px 0; gap: 16px; }
      .logo { display: flex; align-items: center; gap: 10px; font-weight: 800; white-space: nowrap; }
      .logo-badge {
        width: 38px; height: 38px; border-radius: 12px;
        background: linear-gradient(135deg, var(--brand), var(--brand2));
        box-shadow: 0 10px 24px rgba(109, 94, 252, 0.25);
        display: grid; place-items: center;
        font-weight: 800; color: #07101f;
      }

      nav ul { list-style: none; display: flex; margin: 0; padding: 0; gap: 18px; flex-wrap: wrap; justify-content: flex-end; }
      nav a { color: var(--muted); font-weight: 600; padding: 10px 12px; border-radius: 12px; transition: 180ms ease; }
      nav a:hover, nav a:focus { color: var(--text); background: rgba(255,255,255,0.07); outline: none; }
      nav a.active { color: var(--text); background: rgba(255,255,255,0.10); border: 1px solid rgba(255,255,255,0.12); }

      .nav-right {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        gap: 12px;
      }

      .theme-toggle {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.12);
        background: rgba(255,255,255,0.06);
        color: var(--muted);
        cursor: pointer;
        font-weight: 800;
        white-space: nowrap;
      }
      .theme-toggle:hover { color: var(--text); border-color: rgba(255,255,255,0.2); }
      html[data-theme="light"] .theme-toggle {
        border-color: rgba(0,0,0,0.12);
        background: rgba(0,0,0,0.04);
      }

      /* Mobile menu */
      .menu-btn {
        display: none;
        width: 44px;
        height: 42px;
        align-items: center;
        justify-content: center;
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.12);
        background: rgba(255,255,255,0.06);
        color: var(--muted);
        cursor: pointer;
        flex: 0 0 auto;
      }
      .menu-btn:hover { color: var(--text); border-color: rgba(255,255,255,0.2); }
      html[data-theme="light"] .menu-btn {
        border-color: rgba(0,0,0,0.12);
        background: rgba(0,0,0,0.04);
      }

      .menu-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.55);
        display: none;
        z-index: 55;
      }
      .menu-overlay.open { display: block; }

      .mobile-menu {
        position: fixed;
        right: 0;
        top: 0;
        height: 100vh;
        width: min(340px, 92vw);
        background: rgba(11,18,32,0.94);
        border-left: 1px solid rgba(255,255,255,0.12);
        backdrop-filter: blur(10px);
        transform: translateX(105%);
        transition: transform 180ms ease;
        z-index: 65;
        display: flex;
        flex-direction: column;
      }
      .mobile-menu.open { transform: translateX(0); }
      .mobile-menu-header {
        padding: 16px;
        border-bottom: 1px solid rgba(255,255,255,0.10);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
      }
      .mobile-menu-links {
        padding: 16px;
        display: grid;
        gap: 10px;
      }
      .mobile-menu a {
        display: block;
        padding: 12px 12px;
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.10);
        background: rgba(255,255,255,0.05);
        color: rgba(234,240,255,0.86);
        font-weight: 800;
      }
      .mobile-menu a:hover { color: var(--text); border-color: rgba(255,255,255,0.2); }
      .mobile-menu a.active {
        border: 0;
        background: linear-gradient(135deg, var(--brand), var(--brand2));
        color: #061122;
      }

      @media (max-width: 760px) {
        header .nav-right nav { display: none; }
        .menu-btn { display: inline-flex; }
      }

      .pill {
        display: inline-flex; align-items: center; gap: 8px;
        padding: 8px 10px; border-radius: 999px;
        background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.12);
        color: rgba(234,240,255,0.86); font-weight: 800; font-size: 13px;
      }

      .hero { padding: 64px 0 18px; }
      .hero-grid { display: grid; grid-template-columns: 1.25fr 0.75fr; gap: 28px; align-items: center; }
      .hero h1 { font-size: clamp(32px, 4.8vw, 56px); line-height: 1.05; margin: 0 0 14px; letter-spacing: -0.02em; }
      .hero p { margin: 0 0 22px; color: var(--muted); font-size: 16px; line-height: 1.7; max-width: 54ch; }
      .row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }

      .cta {
        display: inline-flex; align-items: center; gap: 10px;
        padding: 14px 18px; border-radius: 14px;
        background: linear-gradient(135deg, var(--brand), var(--brand2));
        color: #061122; font-weight: 800; border: 0; cursor: pointer;
        box-shadow: var(--shadow);
        transition: transform 140ms ease, filter 140ms ease;
      }
      .cta:hover { transform: translateY(-1px); filter: brightness(1.05); }

      .ghost-btn {
        display: inline-flex; align-items: center; gap: 10px;
        padding: 14px 18px; border-radius: 14px;
        background: rgba(255,255,255,0.06);
        border: 1px solid rgba(255,255,255,0.14);
        color: var(--text); font-weight: 800; cursor: pointer;
      }
      .ghost-btn:hover { border-color: rgba(255,255,255,0.22); }

      .hero-card {
        border: 1px solid var(--card-border);
        background: var(--card);
        border-radius: var(--radius);
        padding: 18px;
        box-shadow: var(--shadow);
      }
      .hero-card .mock {
        aspect-ratio: 1 / 1;
        border-radius: 14px;
        border: 1px solid rgba(255, 255, 255, 0.14);
        background:
          radial-gradient(500px 240px at 20% 10%, rgba(109, 94, 252, 0.6), transparent 60%),
          radial-gradient(420px 220px at 90% 30%, rgba(25, 211, 255, 0.45), transparent 55%),
          linear-gradient(160deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
        display: grid; place-items: center;
        color: rgba(234, 240, 255, 0.9);
        font-weight: 800; text-align: center; padding: 14px;
      }
      .hero-card small { display: block; margin-top: 10px; color: var(--muted); line-height: 1.5; }

      .section { padding: 26px 0 64px; }
      .section-title { display: flex; align-items: baseline; justify-content: space-between; gap: 16px; margin-bottom: 14px; }
      .section-title h2 { margin: 0; font-size: 22px; letter-spacing: -0.01em; }
      .section-title span { color: var(--muted); font-size: 14px; }

      .controls { display: flex; gap: 10px; flex-wrap: wrap; margin: 12px 0 16px; }
      .input, .select {
        background: rgba(255,255,255,0.06);
        border: 1px solid rgba(255,255,255,0.14);
        color: var(--text);
        padding: 12px 12px;
        border-radius: 14px;
        outline: none;
      }
      .input::placeholder { color: rgba(234,240,255,0.55); }
      .select option { background: #0b1220; }

      .grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 16px; }

      .card {
        grid-column: span 3;
        border: 1px solid var(--card-border);
        background: var(--card);
        border-radius: var(--radius);
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.18);
        transition: transform 140ms ease, border-color 140ms ease;
      }
      .card:hover { transform: translateY(-2px); border-color: rgba(255,255,255,0.2); }

      /* portrait-friendly */
      .card-img {
        height: 260px;
        background: rgba(255,255,255,0.04);
        border-bottom: 1px solid rgba(255,255,255,0.10);
        display: grid;
        place-items: center;
        overflow: hidden;
      }
      .card-img img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        display: block;
        background: rgba(0,0,0,0.12);
      }

      .card-body { padding: 14px; }
      .card-name { margin: 0 0 6px; font-weight: 800; letter-spacing: -0.01em; }
      .meta { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
      .price { font-weight: 800; }
      .rating { color: rgba(234,240,255,0.9); font-weight: 800; display: inline-flex; align-items: center; gap: 6px; }
      .rating .stars { display: inline-flex; gap: 3px; }
      .rating .stars i { color: #ffd166; }
      .card-actions { display: flex; gap: 10px; margin-top: 12px; }

      .btn-sm {
        width: 100%;
        padding: 10px 12px;
        border-radius: 14px;
        font-weight: 800;
        cursor: pointer;
        border: 1px solid rgba(255,255,255,0.14);
        background: rgba(255,255,255,0.06);
        color: var(--text);
      }
      .btn-sm.primary { border: 0; background: linear-gradient(135deg, var(--brand), var(--brand2)); color: #061122; }

      .hint { margin-top: 10px; color: var(--muted); font-size: 13px; }

      /* Footer (Titan/Fastrack-style) */
      .site-footer {
        border-top: 1px solid rgba(255, 255, 255, 0.10);
        background: #05070d;
        color: #eaf0ff;
      }
      .site-footer a { color: rgba(234,240,255,0.78); }
      .site-footer a:hover { color: #eaf0ff; text-decoration: underline; }

      .footer-top {
        padding: 42px 0 28px;
        display: grid;
        grid-template-columns: 1.2fr 2fr 1.4fr;
        gap: 36px;
        align-items: start;
      }

      .footer-brand {
        display: grid;
        gap: 14px;
        align-content: start;
      }
      .footer-brand .brand {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 900;
        letter-spacing: -0.01em;
      }
      .footer-brand .brand .logo-badge {
        width: 42px;
        height: 42px;
        border-radius: 14px;
        background: linear-gradient(135deg, var(--brand), var(--brand2));
        display: grid;
        place-items: center;
        color: #07101f;
      }
      .footer-brand .brand .name { font-size: 18px; }
      .footer-brand .muted { color: rgba(234,240,255,0.72); line-height: 1.6; font-size: 14px; }

      .footer-cols {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 26px;
      }
      .footer-col h4 {
        margin: 0 0 12px;
        font-size: 14px;
        letter-spacing: 0.04em;
        text-transform: uppercase;
      }
      .footer-links {
        display: grid;
        gap: 10px;
        font-size: 14px;
      }

      .social { display: flex; gap: 10px; flex-wrap: wrap; }
      .icon-btn {
        width: 40px;
        height: 40px;
        display: grid;
        place-items: center;
        border-radius: 14px;
        border: 1px solid rgba(255, 255, 255, 0.14);
        background: rgba(255, 255, 255, 0.06);
        color: rgba(234,240,255,0.86);
        transition: 160ms ease;
      }
      .icon-btn:hover { color: #eaf0ff; border-color: rgba(255,255,255,0.22); transform: translateY(-1px); }

      .footer-badges {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 10px;
      }
      .badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.14);
        background: rgba(255,255,255,0.06);
        font-weight: 800;
        white-space: nowrap;
      }

      .footer-mid {
        border-top: 1px solid rgba(255,255,255,0.10);
        padding: 14px 0;
        display: flex;
        justify-content: center;
        gap: 10px;
        flex-wrap: wrap;
        color: rgba(234,240,255,0.78);
        font-size: 14px;
      }
      .footer-mid .sep { opacity: 0.5; }

      .footer-payments {
        border-top: 1px solid rgba(255,255,255,0.10);
        padding: 14px 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 14px;
        flex-wrap: wrap;
      }
      .pay-row { display: flex; gap: 10px; flex-wrap: wrap; }
      .pay-pill {
        padding: 8px 10px;
        border-radius: 999px;
        border: 1px solid rgba(255,255,255,0.14);
        background: rgba(255,255,255,0.06);
        font-weight: 900;
        font-size: 12px;
        letter-spacing: 0.06em;
        color: rgba(234,240,255,0.86);
      }
      .copyright { color: rgba(234,240,255,0.70); font-size: 13px; }

      .help-fab {
        position: fixed;
        right: 18px;
        bottom: 18px;
        width: 54px;
        height: 54px;
        border-radius: 999px;
        display: grid;
        place-items: center;
        border: 0;
        cursor: pointer;
        background: #ff6a00;
        color: #0b1220;
        box-shadow: 0 18px 50px rgba(0,0,0,0.45);
        z-index: 95;
      }
      .help-fab:hover { filter: brightness(1.06); transform: translateY(-1px); }

      @media (max-width: 980px) {
        .footer-top { grid-template-columns: 1fr; }
        .footer-cols { grid-template-columns: 1fr 1fr; }
      }
      @media (max-width: 560px) {
        .footer-cols { grid-template-columns: 1fr; }
        .footer-payments { justify-content: center; }
      }

      /* Overlay + drawer */
      .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.55); display: none; z-index: 50; }
      .overlay.open { display: block; }

      .drawer {
        position: fixed; right: 0; top: 0;
        height: 100vh; width: min(420px, 92vw);
        background: rgba(11,18,32,0.92);
        border-left: 1px solid rgba(255,255,255,0.12);
        backdrop-filter: blur(10px);
        transform: translateX(105%);
        transition: transform 180ms ease;
        z-index: 60;
        display: flex; flex-direction: column;
      }
      .drawer.open { transform: translateX(0); }
      .drawer-header {
        padding: 16px;
        border-bottom: 1px solid rgba(255,255,255,0.10);
        display: flex; align-items: center; justify-content: space-between; gap: 10px;
      }
      .drawer-header h3 { margin: 0; }
      .close {
        border: 1px solid rgba(255,255,255,0.14);
        background: rgba(255,255,255,0.06);
        color: var(--text);
        border-radius: 12px;
        padding: 10px 12px;
        cursor: pointer;
        font-weight: 800;
      }
      .drawer-body { padding: 16px; overflow: auto; flex: 1; }
      .cart-item {
        border: 1px solid rgba(255,255,255,0.12);
        background: rgba(255,255,255,0.05);
        border-radius: 14px;
        padding: 12px;
        display: grid;
        gap: 8px;
        margin-bottom: 10px;
      }
      .cart-row { display: flex; justify-content: space-between; gap: 10px; align-items: center; }
      .qty { display: inline-flex; align-items: center; gap: 8px; }
      .qty button {
        width: 34px; height: 34px;
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.14);
        background: rgba(255,255,255,0.06);
        color: var(--text);
        font-weight: 900;
        cursor: pointer;
      }
      .drawer-footer {
        border-top: 1px solid rgba(255,255,255,0.10);
        padding: 16px;
        display: grid;
        gap: 10px;
      }
      .total { display: flex; justify-content: space-between; font-weight: 900; }

      /* Modals */
      .modal { position: fixed; inset: 0; display: none; z-index: 70; }
      .modal.open { display: block; }
      .modal-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.62); }
      .modal-panel {
        position: relative;
        width: min(820px, 94vw);
        margin: 7vh auto;
        border-radius: 18px;
        border: 1px solid rgba(255,255,255,0.14);
        background: rgba(11,18,32,0.92);
        backdrop-filter: blur(10px);
        box-shadow: var(--shadow);
        overflow: hidden;
      }
      .modal-header {
        padding: 16px;
        border-bottom: 1px solid rgba(255,255,255,0.10);
        display: flex; align-items: center; justify-content: space-between; gap: 10px;
      }
      .modal-header h3 { margin: 0; }
      .modal-body { padding: 16px; }
      #authModal .modal-panel { width: min(520px, 92vw); }

      /* Product details layout */
      .pd-grid { display: grid; grid-template-columns: 1.1fr 0.9fr; gap: 16px; }
      .pd-main-img {
        height: 420px;
        border-radius: 16px;
        overflow: hidden;
        border: 1px solid rgba(255,255,255,0.12);
        background: rgba(255,255,255,0.04);
      }
      .pd-main-img img {
        width: 100%; height: 100%;
        object-fit: contain;
        display: block;
        background: rgba(0,0,0,0.12);
      }
      .pd-thumbs { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 10px; }
      .pd-thumb {
        border-radius: 14px;
        overflow: hidden;
        border: 1px solid rgba(255,255,255,0.12);
        background: rgba(255,255,255,0.04);
        cursor: pointer;
        height: 92px;
      }
      .pd-thumb img {
        width: 100%; height: 100%;
        object-fit: contain;
        display: block;
        background: rgba(0,0,0,0.12);
      }
      .pd-thumb.active { outline: 2px solid rgba(25,211,255,0.55); outline-offset: 2px; }
      .pd-title { margin: 0 0 8px; font-size: 24px; letter-spacing: -0.01em; }
      .pd-tag { color: var(--muted); font-weight: 700; margin: 0 0 10px; }
      .pd-desc { color: rgba(234,240,255,0.82); line-height: 1.65; margin: 0 0 12px; }
      .pd-features { margin: 0; padding-left: 18px; color: rgba(234,240,255,0.82); line-height: 1.65; }
      .pd-actions { display: flex; gap: 10px; margin-top: 14px; flex-wrap: wrap; }
      .pd-price { display: inline-flex; align-items: center; gap: 10px; font-weight: 900; font-size: 20px; }
      .pd-rating { display: inline-flex; align-items: center; gap: 8px; color: rgba(234,240,255,0.92); font-weight: 900; }

      /* Auth forms */
      .form { display: grid; gap: 12px; }
      .field { display: grid; gap: 6px; }
      label { font-weight: 800; font-size: 13px; color: rgba(234,240,255,0.88); }
      .error { color: var(--danger); font-size: 12px; min-height: 14px; }
      .success { color: var(--ok); font-size: 12px; min-height: 14px; }
      .note { color: var(--muted); font-size: 13px; line-height: 1.5; }
      .switch { display: flex; justify-content: space-between; gap: 10px; align-items: center; margin-top: 6px; }
      .link-btn { border: 0; background: transparent; color: rgba(234,240,255,0.9); font-weight: 900; cursor: pointer; padding: 0; text-decoration: underline; }

      /* Toast */
      .toast {
        position: fixed; left: 50%; bottom: 18px;
        transform: translateX(-50%);
        background: rgba(255,255,255,0.10);
        border: 1px solid rgba(255,255,255,0.16);
        color: var(--text);
        padding: 10px 12px;
        border-radius: 14px;
        backdrop-filter: blur(10px);
        display: none;
        z-index: 90;
      }
      .toast.show { display: block; }

      .pulse {
        outline: 2px solid rgba(25, 211, 255, 0.6);
        outline-offset: 6px;
        border-radius: 18px;
        transition: outline-offset 240ms ease;
      }

      @media (max-width: 980px) {
        .hero-grid { grid-template-columns: 1fr; }
        .card { grid-column: span 6; }
        .pd-grid { grid-template-columns: 1fr; }
        .modal-panel { margin: 4vh auto; }
      }
      @media (max-width: 560px) {
        nav ul { gap: 8px; }
        .card { grid-column: span 12; }
      }
    </style>
  </head>

  <body>
    <header>
      <div class="container">
        <div class="nav">
          <a class="logo" href="#home" aria-label="SmartWatch Hub Home">
            <span class="logo-badge">SW</span>
            <span>SmartWatch Hub</span>
          </a>

          <div class="nav-right">
            <button id="mobileMenuBtn" class="menu-btn" type="button" aria-label="Open menu">
              <i class="fa-solid fa-bars" aria-hidden="true"></i>
            </button>

            <nav aria-label="Primary">
              <ul>
                <li><a data-link href="#home">Home</a></li>
                <li><a data-link href="#watches">Watches</a></li>
                <li><a data-link href="#upcoming">Upcoming</a></li>
                <li><a data-link href="#features">Features</a></li>
                <li><a id="loginLink" href="#login">Login</a></li>
                <li><a id="registerLink" href="#register">Register</a></li>
              </ul>
            </nav>

            <button id="themeToggle" class="theme-toggle" type="button" aria-label="Toggle dark/light theme">
              <i class="fa-solid fa-moon" aria-hidden="true"></i>
              <span>Theme</span>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Mobile Menu (Drawer) -->
    <div id="menuOverlay" class="menu-overlay" aria-hidden="true"></div>
    <aside id="mobileMenu" class="mobile-menu" aria-label="Mobile menu" aria-hidden="true">
      <div class="mobile-menu-header">
        <div style="font-weight: 900;">Menu</div>
        <button id="closeMenuBtn" class="close" type="button">Close</button>
      </div>
      <div class="mobile-menu-links">
        <a data-link href="#home">Home</a>
        <a href="./watches.html">Watches</a>
        <a data-link href="#upcoming">Upcoming</a>
        <a data-link href="#features">Features</a>
        <a href="#" id="mobileLoginLink">Login</a>
        <a href="#" id="mobileRegisterLink">Register</a>
      </div>
    </aside>

    <main id="home" class="hero">
      <div class="container">
        <div class="hero-grid">
          <section aria-label="Hero">
            <div class="row" style="margin-bottom: 12px;">
              <span class="pill">
                <i class="fa-solid fa-bolt" aria-hidden="true"></i>
                JS-powered Store Demo
              </span>
              <span id="authPill" class="pill" style="display: none"></span>
            </div>

            <h1>Discover the Future on Your Wrist</h1>
            <p>
              Premium smartwatches built for fitness, productivity, and style. Track your health,
              stay connected, and upgrade your everyday.
            </p>

            <div class="row">
              <button id="shopNowBtn" class="cta" type="button">
                <i class="fa-solid fa-bag-shopping" aria-hidden="true"></i>
                Shop Now
              </button>

              <button id="openCartBtn" class="ghost-btn" type="button">
                <i class="fa-solid fa-cart-shopping" aria-hidden="true"></i>
                Cart (<span id="cartCount">0</span>)
              </button>

              <button id="logoutBtn" class="ghost-btn" type="button" style="display: none">
                <i class="fa-solid fa-right-from-bracket" aria-hidden="true"></i>
                Logout
              </button>
            </div>

            <div class="hint">
              Featured + Upcoming sections both have Search/Sort/Clear + Details + Add to Cart.
            </div>
          </section>

          <aside class="hero-card" aria-label="Product teaser">
            <div class="mock">
              <div>
                New Drop<br />
                <span style="font-weight: 600; color: rgba(234, 240, 255, 0.75)">
                  AMOLED • GPS • 7-Day Battery
                </span>
              </div>
            </div>
            <small>Scroll down to explore products.</small>
          </aside>
        </div>
      </div>

      <!-- Featured -->
      <section id="watches" class="section" aria-label="Featured smartwatches">
        <div class="container">
          <div class="section-title">
            <h2>Featured Smartwatches</h2>
            <span id="resultsText">Loading...</span>
          </div>

          <div class="controls" aria-label="Watches controls">
            <input id="searchInput" class="input" type="search" placeholder="Search featured..." />

            <select id="brandSelect" class="select" aria-label="Filter by brand">
              <option value="all" selected>Brand: All</option>
              <option value="Apple">Apple</option>
              <option value="Noise">Noise</option>
              <option value="Fire-Boltt">Fire-Boltt</option>
            </select>

            <select id="sortSelect" class="select" aria-label="Sort watches">
              <option value="featured" selected>Sort: Featured</option>
              <option value="price_asc">Price: Low → High</option>
              <option value="price_desc">Price: High → Low</option>
              <option value="rating_desc">Rating: High → Low</option>
            </select>
            <button id="clearBtn" class="btn-sm" type="button" style="width: auto">Clear</button>
          </div>

          <div id="watchesGrid" class="grid"></div>
        </div>
      </section>

      <!-- Upcoming -->
      <section id="upcoming" class="section" aria-label="Upcoming products" style="padding-top: 0">
        <div class="container">
          <div class="section-title">
            <h2>Upcoming Products</h2>
            <span id="upcomingResultsText">Loading...</span>
          </div>

          <div class="controls" aria-label="Upcoming controls">
            <input id="upSearchInput" class="input" type="search" placeholder="Search upcoming..." />
            <select id="upSortSelect" class="select" aria-label="Sort upcoming">
              <option value="featured" selected>Sort: Featured</option>
              <option value="price_asc">Price: Low → High</option>
              <option value="price_desc">Price: High → Low</option>
              <option value="rating_desc">Rating: High → Low</option>
            </select>
            <button id="upClearBtn" class="btn-sm" type="button" style="width: auto">Clear</button>
          </div>

          <div id="upcomingGrid" class="grid"></div>
        </div>
      </section>

      <section id="features" class="section" aria-label="Features" style="padding-top: 0">
        <div class="container">
          <div class="section-title">
            <h2>Features</h2>
            <span>Health tracking • Notifications • Payments</span>
          </div>
          <p style="color: var(--muted); margin: 0; line-height: 1.7; max-width: 70ch;">
            Add your feature list here (heart-rate monitoring, sleep tracking, GPS, water resistance, etc.).
          </p>
        </div>
      </section>

      <footer class="site-footer" aria-label="Footer">
        <div class="container">
          <div class="footer-top">
            <div class="footer-brand">
              <div class="brand" aria-label="Brand">
                <span class="logo-badge">SW</span>
                <span class="name">SmartWatch Hub</span>
              </div>
              <div class="muted">
                Premium smartwatches for fitness, productivity, and style.
              </div>
              <div class="social" aria-label="Social links">
                <a class="icon-btn" href="#" aria-label="Facebook"><i class="fa-brands fa-facebook-f"></i></a>
                <a class="icon-btn" href="#" aria-label="X (Twitter)"><i class="fa-brands fa-x-twitter"></i></a>
                <a class="icon-btn" href="#" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
                <a class="icon-btn" href="#" aria-label="YouTube"><i class="fa-brands fa-youtube"></i></a>
                <a class="icon-btn" href="#" aria-label="Pinterest"><i class="fa-brands fa-pinterest-p"></i></a>
              </div>
            </div>

            <div class="footer-cols">
              <div class="footer-col">
                <h4>Customer Service</h4>
                <div class="footer-links">
                  <a href="#">Payment Options</a>
                  <a href="#">Track Order</a>
                  <a href="#">Find a Store</a>
                  <a href="#">Loyalty Program</a>
                </div>
              </div>

              <div class="footer-col">
                <h4>Policies</h4>
                <div class="footer-links">
                  <a href="#">Brand Protection</a>
                  <a href="#">Cancellation</a>
                  <a href="#">Shipping</a>
                  <a href="#">Warranty Policies</a>
                </div>
              </div>

              <div class="footer-col">
                <h4>Contact Us</h4>
                <div class="footer-links">
                  <a href="tel:18002660123">1800-266-0123</a>
                  <a href="mailto:support@smartwatchhub.com">support@smartwatchhub.com</a>
                  <a href="#">FAQs</a>
                </div>
              </div>
            </div>

            <div class="footer-col">
              <h4>About SmartWatch Hub</h4>
              <div class="footer-links">
                <a href="#">About Us</a>
                <a href="#">Help & Contact</a>
                <a href="#">Careers</a>
              </div>

              <h4 style="margin-top: 18px;">Download the App</h4>
              <div class="footer-badges" aria-label="App download">
                <a class="badge" href="#" aria-label="Download on the App Store">
                  <i class="fa-brands fa-apple" aria-hidden="true"></i>
                  App Store
                </a>
                <a class="badge" href="#" aria-label="Get it on Google Play">
                  <i class="fa-brands fa-google-play" aria-hidden="true"></i>
                  Google Play
                </a>
              </div>

              <h4 style="margin-top: 18px;">Need Help?</h4>
              <div class="footer-links">
                <a href="#" id="whatsAppLink">Chat with us on WhatsApp</a>
              </div>
            </div>
          </div>

          <div class="footer-mid" aria-label="Legal links">
            <a href="#">Terms and Conditions</a>
            <span class="sep">|</span>
            <a href="#">Privacy Policy</a>
          </div>

          <div class="footer-payments" aria-label="Payments">
            <div class="pay-row">
              <span class="pay-pill">VISA</span>
              <span class="pay-pill">MASTERCARD</span>
              <span class="pay-pill">PAYPAL</span>
              <span class="pay-pill">RUPAY</span>
              <span class="pay-pill">AXIS</span>
              <span class="pay-pill">ICICI</span>
              <span class="pay-pill">DINERS</span>
            </div>
            <div class="copyright">© <span id="year"></span> SmartWatch Hub. All Rights Reserved.</div>
          </div>
        </div>
      </footer>

      <button id="helpFab" class="help-fab" type="button" aria-label="Need help">
        <i class="fa-solid fa-comment" aria-hidden="true"></i>
      </button>
    </main>

    <!-- Overlay for drawer -->
    <div id="overlay" class="overlay" aria-hidden="true"></div>

    <!-- Cart Drawer -->
    <aside id="drawer" class="drawer" aria-label="Cart drawer" aria-hidden="true">
      <div class="drawer-header">
        <h3 style="margin: 0">Your Cart</h3>
        <button id="closeCartBtn" class="close" type="button">Close</button>
      </div>

      <div class="drawer-body">
        <div id="cartItems"></div>
        <div id="emptyCart" style="color: var(--muted); display: none">
          Your cart is empty. Add a watch to start.
        </div>
      </div>

      <div class="drawer-footer">
        <div class="total">
          <span>Total</span>
          <span id="cartTotal">$0</span>
        </div>
        <button id="checkoutBtn" class="btn-sm primary" type="button">Checkout</button>
        <div class="note">Note: Checkout demo che. Real payment integration nahi.</div>
      </div>
    </aside>

    <!-- Product Details Modal -->
    <div id="detailsModal" class="modal" aria-hidden="true">
      <div id="detailsBackdrop" class="modal-backdrop"></div>

      <div class="modal-panel" role="dialog" aria-modal="true" aria-label="Product details modal">
        <div class="modal-header">
          <h3 style="margin: 0">Product Details</h3>
          <button id="closeDetailsBtn" class="close" type="button">Close</button>
        </div>

        <div class="modal-body">
          <div class="pd-grid">
            <div>
              <div class="pd-main-img">
                <img id="pdMainImg" src="" alt="Product image" />
              </div>
              <div id="pdThumbs" class="pd-thumbs"></div>
            </div>

            <div>
              <h2 id="pdTitle" class="pd-title"></h2>
              <div id="pdTag" class="pd-tag"></div>

              <div class="row" style="margin: 10px 0 12px;">
                <div id="pdPrice" class="pd-price"></div>
                <div id="pdRating" class="pd-rating"></div>
              </div>

              <p id="pdDesc" class="pd-desc"></p>

              <div style="font-weight: 900; margin: 10px 0 6px;">Highlights</div>
              <ul id="pdFeatures" class="pd-features"></ul>

              <div class="pd-actions">
                <button id="pdAddBtn" class="btn-sm primary" type="button">
                  <i class="fa-solid fa-cart-plus" aria-hidden="true"></i>
                  Add to Cart
                </button>
                <button id="pdCartBtn" class="btn-sm" type="button">View Cart</button>
              </div>

              <div class="hint">Tip: thumbnails par click kari image change kari sako.</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal" aria-hidden="true">
      <div id="authBackdrop" class="modal-backdrop"></div>

      <div class="modal-panel" role="dialog" aria-modal="true" aria-label="Authentication modal">
        <div class="modal-header">
          <h3 id="authTitle" style="margin: 0">Login</h3>
          <button id="closeAuthBtn" class="close" type="button">Close</button>
        </div>

        <div class="modal-body">
          <form id="loginForm" class="form" novalidate>
            <div class="field">
              <label for="loginEmail">Email</label>
              <input id="loginEmail" class="input" type="email" placeholder="you@example.com" />
              <div id="loginEmailErr" class="error"></div>
            </div>

            <div class="field">
              <label for="loginPassword">Password</label>
              <input id="loginPassword" class="input" type="password" placeholder="Your password" />
              <div id="loginPasswordErr" class="error"></div>
            </div>

            <button class="btn-sm primary" type="submit">Login</button>
            <div id="loginMsg" class="success"></div>

            <div class="switch">
              <span class="note">Account nathi?</span>
              <button id="goRegister" class="link-btn" type="button">Register</button>
            </div>
          </form>

          <form id="registerForm" class="form" novalidate style="display: none">
            <div class="field">
              <label for="regName">Full Name</label>
              <input id="regName" class="input" type="text" placeholder="Your name" />
              <div id="regNameErr" class="error"></div>
            </div>

            <div class="field">
              <label for="regEmail">Email</label>
              <input id="regEmail" class="input" type="email" placeholder="you@example.com" />
              <div id="regEmailErr" class="error"></div>
            </div>

            <div class="field">
              <label for="regPassword">Password</label>
              <input id="regPassword" class="input" type="password" placeholder="Min 8 chars, 1 number" />
              <div id="regPasswordErr" class="error"></div>
            </div>

            <div class="field">
              <label for="regConfirm">Confirm Password</label>
              <input id="regConfirm" class="input" type="password" placeholder="Re-enter password" />
              <div id="regConfirmErr" class="error"></div>
            </div>

            <button class="btn-sm primary" type="submit">Create Account</button>
            <div id="regMsg" class="success"></div>

            <div class="switch">
              <span class="note">Already account che?</span>
              <button id="goLogin" class="link-btn" type="button">Login</button>
            </div>

            <div class="note">Demo: user localStorage ma save thase (real backend nathi).</div>
          </form>
        </div>
      </div>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <script>
      // -----------------------------
      // Shared helpers
      // -----------------------------
      const $ = (sel) => document.querySelector(sel);
      const $$ = (sel) => Array.from(document.querySelectorAll(sel));
      const money = (n) => `$${n.toFixed(0)}`;
      const clamp = (n, min, max) => Math.max(min, Math.min(max, n));

      // -----------------------------
      // Theme (Dark/Light)
      // -----------------------------
      const THEME_KEY = "swh_theme_v1";

      function getSystemTheme() {
        try {
          return window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches
            ? "light"
            : "dark";
        } catch {
          return "dark";
        }
      }

      function loadTheme() {
        const saved = localStorage.getItem(THEME_KEY);
        if (saved === "light" || saved === "dark") return saved;
        return getSystemTheme();
      }

      function setTheme(theme) {
        document.documentElement.setAttribute("data-theme", theme);
        localStorage.setItem(THEME_KEY, theme);
        updateThemeToggle(theme);
      }

      function toggleTheme() {
        const cur = document.documentElement.getAttribute("data-theme") || "dark";
        setTheme(cur === "dark" ? "light" : "dark");
      }

      function updateThemeToggle(theme) {
        const btn = $("#themeToggle");
        if (!btn) return;

        // If current theme is dark -> show sun (switch to light)
        // If current theme is light -> show moon (switch to dark)
        const icon = theme === "dark" ? "fa-sun" : "fa-moon";
        btn.innerHTML = `<i class=\"fa-solid ${icon}\" aria-hidden=\"true\"></i><span>Theme</span>`;
        btn.setAttribute("aria-label", theme === "dark" ? "Switch to light theme" : "Switch to dark theme");
      }

      // -----------------------------
      // Mobile Menu (Drawer)
      // -----------------------------
      function openMobileMenu() {
        $("#menuOverlay")?.classList.add("open");
        $("#mobileMenu")?.classList.add("open");
        $("#menuOverlay")?.setAttribute("aria-hidden", "false");
        $("#mobileMenu")?.setAttribute("aria-hidden", "false");
      }

      function closeMobileMenu() {
        $("#menuOverlay")?.classList.remove("open");
        $("#mobileMenu")?.classList.remove("open");
        $("#menuOverlay")?.setAttribute("aria-hidden", "true");
        $("#mobileMenu")?.setAttribute("aria-hidden", "true");
      }

      function toast(msg) {
        const el = $("#toast");
        el.textContent = msg;
        el.classList.add("show");
        clearTimeout(toast._t);
        toast._t = setTimeout(() => el.classList.remove("show"), 1400);
      }

      function stars(rating) {
        const full = Math.floor(rating);
        const half = rating - full >= 0.5 ? 1 : 0;
        const empty = 5 - full - half;

        const fullStars = Array.from({ length: full }, () => `<i class="fa-solid fa-star" aria-hidden="true"></i>`).join("");
        const halfStar = half ? `<i class="fa-solid fa-star-half-stroke" aria-hidden="true"></i>` : "";
        const emptyStars = Array.from({ length: empty }, () => `<i class="fa-regular fa-star" aria-hidden="true"></i>`).join("");

        return `<span class="stars" aria-hidden="true">${fullStars}${halfStar}${emptyStars}</span>`;
      }

      // -----------------------------
      // DATA: Featured + Upcoming
      // (Replace images with your local ones if you want)
      // -----------------------------
      const WATCHES = [
        {
          id: "Apple Watch SE 2",
          name: "Apple Watch SE 2",
          brand: "Apple",
          price: 249,
          rating: 4.5,
          tag: "Retina . GPS",
          images: [
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/k/c/7/-original-imah4jmydtzdqvmz.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/x/3/m/-original-imah4jmyrzb88w3u.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/p/a/u/-original-imah4jmy6gs9rput.jpeg?q=70",
          ],
          description:
            "Apple Watch SE delivers essential features like fitness, tracking, nofitications, and crash detection at a great value.",
            features: ["Retina display", "GPS", "Heart-rate monitoring", "Crash Detection", "All-day battery"],
        },
        {
          id: "Apple Watch Series 9",
          name: "Apple Watch Series 9",
          brand: "Apple",
          price: 399,
          rating: 4.8,
          tag: "Always-on . GPS",
          images: [
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/7/r/e/45-mr993hn-a-ios-apple-yes-original-imagterzzu4fsrqg.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/h/c/3/-original-imagte4syszvbmt2.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/s/x/z/45-mrmt3hn-a-ios-apple-yes-original-imagtcuvp2bwyzmt.jpeg?q=70",
          ],
          description:
            "Series 9 offers faster performance, brighter display, and powerful health tracking features.",
            features:["Always-On display", "ECG", "Blood Oxygen", "Siri on-device", "Fast charging"],
        },
        {
          id: "Apple Watch Ultra",
          name: "Apple Watch Ultra",
          brand: "Apple",
          price: 799,
          rating: 4.9,
          tag: "Titanium . gps + cellular",
          images: [
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/7/6/p/-original-imah4jm9ycgmwg2e.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/p/z/i/-original-imah4jm9zr3zggwy.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/v/v/a/-original-imah4jm9vgubftjy.jpeg?q=70",
          ],
          description:
            "Designed for extreme sports and adventures with rugged build and long battery life.",
          features: ["Titanium case", "Dual-frequency GPS", "Water resistant 100m", "36-hour battery", "Action button"],
        },
        {
          id: "Apple Watch Series 8",
          name: "Apple Watch Series 8",
          brand: "Apple",
          price: 349,
          rating: 4.7,
          tag: "ECG . Temperature",
          images: [
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/d/r/n/-original-imaghxg3wwp5fkgm.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/3/i/t/-original-imaghxg38eptz86y.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/g/w/v/-original-imaghxg3rmufhtre.jpeg?q=70",
          ],
          description:
            "Advanced health insights including temperature sensiug and crash detection.",
            features: ["ECG app", "Blood Oxygen", "Temperature sensing", "Crash detection", "Always-On display"],
        },
        {
          id: "noise_colorfit_ultra",
          name: "ColorFit Ultra",
          brand: "Noise",
          price: 99,
          rating: 4.5,
          tag: "AMOLED . Fitness",
          images: [
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/w/m/u/-original-imah39dusvdhezk5.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/w/q/f/-original-imah39dtbfpw6vsw.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/l/f/p/-original-imah39dth79qu9h3.jpeg?q=70",
          ],
          description:
            "Noise ColorFit Ultra features a vibrant AMOLED display with advanced fitness tracking and smart notifications.",
          features: ["AMOLED display", "Heart-rate tracking", "Sp02 monitoring", "Multiple sports modes", "7-day battery"],
        },
        {
          id: "noise_colorfit_pro_4",
          name: "ColorFit Pro 4",
          brand: "Noise",
          price: 109,
          rating: 4.6,
          tag: "AMOLED . Bluetooth",
          images: [
            "https://rukminim2.flixcart.com/image/612/612/l2z26q80/smartwatch/8/q/a/43-688-wrb-sw-colorfitpro4-std-blk-blu-android-ios-noise-yes-original-image6yxqzgnugxh.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/z/i/o/-original-imagkspjzmpmraag.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/l55nekw0/smartwatch/2/5/x/-original-imagfw2rnuctjswc.jpeg?q=70",
          ],
          description:
            "ColorFit Pro 4 delivers crisp visuals, Bluetooth calling, and powerful health tracking in a permium design.",
          features: ["AMOLED display", "Bluetooth calling", "Sleep tracking", "100+ watch faces", "Fast charging"],
        },
        {
          id: "noise_icon_2",
          name: "Noise Icon 2",
          brand: "Noise",
          price: 79,
          rating: 4.4,
          tag: "Bluetooth . Calling",
          images: [
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/q/a/n/45-72-wrb-sw-colorfiticon2-2025-std-blk-blk-android-ios-noise-original-imahe6dt3gazezmm.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/f/n/s/45-72-wrb-sw-colorfiticon2-2025-std-blk-blk-android-ios-noise-original-imahe6dtnnad9zph.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/j/p/u/45-72-wrb-sw-colorfiticon2-2025-std-blk-blk-android-ios-noise-original-imahe6dtjh6apsch.jpeg?q=70",
          ],
          description:
            "Noise Icon 2 comes with Bluetooth calling, a large display, and smart fitness tracking features.",
          features: ["Bluetooth calling", "AI voice assistant", "Heart-rate sensor", "IP67 water resistance", "7-day battery"],
        },
        {
          id: "noise_evolve_3",
          name: "Noise Evolve 3",
          brand: "Noise",
          price: 129,
          rating: 4.7,
          tag: "AMOLED . Premium",
          images: [
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/t/c/a/-original-imagzw9t5svbsuyw.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/z/p/2/-original-imaguhmega9yzjsv.jpeg?q=70",
            "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/z/p/2/-original-imaguhmega9yzjsv.jpeg?q=70",
          ],
          description:
            "Noise Evolve 3 offers a premium AMOLED screen with sleek design and advanced health tracking.",
          features: ["AMOLED display", "Stress monitoring", "Sp02 sensor", "Metal body", "Up to 10-day battery"],
        },
      ];

      const UPCOMING_WATCHES = [
        {
          id: "neo_edge",
          name: "Neo Edge (Upcoming)",
          price: 299,
          rating: 4.7,
          tag: "New • AI Health",
          images: [
            "https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&w=1200&q=70",
            "https://images.unsplash.com/photo-1528143357870-3d5fd45a9b43?auto=format&fit=crop&w=1200&q=70",
            "https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?auto=format&fit=crop&w=1200&q=70",
          ],
          description:
            "Neo Edge brings next-gen sensors, AI health insights and a brighter display for your daily routine.",
          features: ["AI health insights", "Brighter display", "New sensors", "Better battery", "Faster charging"],
        },
        {
          id: "aurora_max",
          name: "Aurora Max (Upcoming)",
          price: 349,
          rating: 4.9,
          tag: "Ultra • Outdoor",
          images: [
            "https://images.unsplash.com/photo-1544117519-31a4b719223d?auto=format&fit=crop&w=1200&q=70",
            "https://images.unsplash.com/photo-1516574187841-cb9cc2ca948b?auto=format&fit=crop&w=1200&q=70",
            "https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&w=1200&q=70",
          ],
          description:
            "Aurora Max is designed for adventure: tough body, accurate GPS, and extended battery.",
          features: ["Rugged design", "Accurate GPS", "Extended battery", "Water resistance", "Premium strap"],
        },
      ];

      // -----------------------------
      // Cart + Auth storage
      // -----------------------------
      let cart = loadCart();
      let currentUser = loadCurrentUser();

      function saveCart() { localStorage.setItem("swh_cart_v1", JSON.stringify(cart)); }
      function loadCart() {
        try { return JSON.parse(localStorage.getItem("swh_cart_v1")) || {}; }
        catch { return {}; }
      }

      function loadUsers() {
        try { return JSON.parse(localStorage.getItem("swh_users_v1")) || []; }
        catch { return []; }
      }
      function saveUsers(users) { localStorage.setItem("swh_users_v1", JSON.stringify(users)); }
      function saveCurrentUser(user) { localStorage.setItem("swh_current_user_v1", JSON.stringify(user)); }
      function loadCurrentUser() {
        try { return JSON.parse(localStorage.getItem("swh_current_user_v1")) || null; }
        catch { return null; }
      }
      function clearCurrentUser() { localStorage.removeItem("swh_current_user_v1"); }

      // -----------------------------
      // Cart rendering
      // -----------------------------
      function getCartCount() {
        return Object.values(cart).reduce((sum, item) => sum + item.qty, 0);
      }
      function getCartTotal() {
        // total across both featured + upcoming
        const all = [...WATCHES, ...UPCOMING_WATCHES];
        let total = 0;
        for (const { id, qty } of Object.values(cart)) {
          const p = all.find((x) => x.id === id);
          if (p) total += p.price * qty;
        }
        return total;
      }

      function renderCart() {
        const itemsEl = $("#cartItems");
        const emptyEl = $("#emptyCart");
        const entries = Object.values(cart);
        const all = [...WATCHES, ...UPCOMING_WATCHES];

        $("#cartCount").textContent = String(getCartCount());
        $("#cartTotal").textContent = money(getCartTotal());

        if (entries.length === 0) {
          itemsEl.innerHTML = "";
          emptyEl.style.display = "block";
          return;
        }
        emptyEl.style.display = "none";

        itemsEl.innerHTML = entries
          .map(({ id, qty }) => {
            const p = all.find((x) => x.id === id);
            if (!p) return "";
            const line = p.price * qty;

            return `
              <div class="cart-item" data-id="${id}">
                <div class="cart-row">
                  <div style="font-weight:900;">${p.name}</div>
                  <button class="close" type="button" data-action="remove">Remove</button>
                </div>
                <div class="cart-row" style="color: var(--muted); font-weight: 700;">
                  <span>${money(p.price)} each</span>
                  <span>Line: ${money(line)}</span>
                </div>
                <div class="cart-row">
                  <div class="qty" aria-label="Quantity controls">
                    <button type="button" data-action="dec">−</button>
                    <span style="min-width: 24px; text-align:center; font-weight: 900;">${qty}</span>
                    <button type="button" data-action="inc">+</button>
                  </div>
                </div>
              </div>
            `;
          })
          .join("");
      }

      function addToCart(id) {
        cart[id] = cart[id] || { id, qty: 0 };
        cart[id].qty += 1;
        saveCart();
        renderCart();
        toast("Added to cart");
      }

      function setQty(id, qty) {
        qty = clamp(qty, 0, 99);
        if (qty === 0) delete cart[id];
        else cart[id] = { id, qty };
        saveCart();
        renderCart();
      }

      // Drawer open/close
      function openCart() {
        $("#overlay").classList.add("open");
        $("#drawer").classList.add("open");
        $("#overlay").setAttribute("aria-hidden", "false");
        $("#drawer").setAttribute("aria-hidden", "false");
      }
      function closeCart() {
        $("#overlay").classList.remove("open");
        $("#drawer").classList.remove("open");
        $("#overlay").setAttribute("aria-hidden", "true");
        $("#drawer").setAttribute("aria-hidden", "true");
      }

      // -----------------------------
      // Details modal (works for BOTH arrays)
      // -----------------------------
      let currentProduct = null;
      let currentImgIndex = 0;

      function findProductById(id) {
        return [...WATCHES, ...UPCOMING_WATCHES].find((x) => x.id === id) || null;
      }

      function openDetails(productId) {
        const p = findProductById(productId);
        if (!p) return;

        currentProduct = p;
        currentImgIndex = 0;
        $("#detailsModal").classList.add("open");
        $("#detailsModal").setAttribute("aria-hidden", "false");
        renderDetails();
      }

      function closeDetails() {
        $("#detailsModal").classList.remove("open");
        $("#detailsModal").setAttribute("aria-hidden", "true");
        currentProduct = null;
      }

      function renderDetails() {
        if (!currentProduct) return;
        const p = currentProduct;

        $("#pdTitle").textContent = p.name;
        $("#pdTag").textContent = p.tag;

        $("#pdPrice").innerHTML = `<i class="fa-solid fa-tag" aria-hidden="true"></i> ${money(p.price)}`;
        $("#pdRating").innerHTML = `${stars(p.rating)} <span>${p.rating.toFixed(1)}</span>`;

        $("#pdDesc").textContent = p.description || "";
        $("#pdFeatures").innerHTML = (p.features || []).map((f) => `<li>${f}</li>`).join("");

        const imgs = p.images && p.images.length ? p.images : [];
        const safeIndex = clamp(currentImgIndex, 0, Math.max(0, imgs.length - 1));
        currentImgIndex = safeIndex;

        $("#pdMainImg").src = imgs[safeIndex] || "https://via.placeholder.com/1200x800?text=Smartwatch";
        $("#pdThumbs").innerHTML = imgs.slice(0, 3).map((url, idx) => `
          <div class="pd-thumb ${idx === safeIndex ? "active" : ""}" data-idx="${idx}">
            <img src="${url}" alt="${p.name} image ${idx + 1}" loading="lazy"
              onerror="this.onerror=null; this.src='https://via.placeholder.com/600x400?text=Image';" />
          </div>
        `).join("");

        $("#pdAddBtn").onclick = () => addToCart(p.id);
      }

      // -----------------------------
      // Shared renderer for a product section
      // -----------------------------
      function getFilteredSorted(list, q, sort, brand) {
        let out = list.filter((w) => w.name.toLowerCase().includes(q));

        if (brand && brand !== "all") {
          out = out.filter((w) => (w.brand || "").toLowerCase() === brand.toLowerCase());
        }

        if (sort === "price_asc") out.sort((a, b) => a.price - b.price);
        if (sort === "price_desc") out.sort((a, b) => b.price - a.price);
        if (sort === "rating_desc") out.sort((a, b) => b.rating - a.rating);
        return out;
      }

      function renderProductGrid({
        products,
        gridEl,
        resultsEl,
        query,
        sort,
        brand,
      }) {
        const list = getFilteredSorted(products, query, sort, brand);
        resultsEl.textContent = `${list.length} result(s)`;

        gridEl.innerHTML = list.map((w) => {
          const cover = (w.images && w.images[0]) ? w.images[0] : "https://via.placeholder.com/900x600?text=Smartwatch";
          return `
            <article class="card" data-id="${w.id}">
              <div class="card-img" role="img" aria-label="${w.name} product image">
                <img src="${cover}" alt="${w.name}" loading="lazy"
                  onerror="this.onerror=null; this.src='https://via.placeholder.com/900x600?text=Smartwatch';" />
              </div>
              <div class="card-body">
                <h3 class="card-name">${w.name}</h3>
                <div class="meta">
                  <div class="price">${money(w.price)}</div>
                  <div class="rating" aria-label="Rating ${w.rating} out of 5">
                    ${stars(w.rating)}
                    <span>${w.rating.toFixed(1)}</span>
                  </div>
                </div>

                <div class="hint" style="margin-top: 8px;">${w.tag}${w.brand ? ` • ${w.brand}` : ""}</div>

                <div class="card-actions">
                  <button class="btn-sm primary" type="button" data-action="add">
                    <i class="fa-solid fa-cart-plus" aria-hidden="true"></i>
                    Add to Cart
                  </button>
                  <button class="btn-sm" type="button" data-action="details">Details</button>
                </div>
              </div>
            </article>
          `;
        }).join("");
      }

      // Featured render
      function renderFeatured() {
        const q = ($("#searchInput").value || "").trim().toLowerCase();
        const sort = $("#sortSelect").value;
        const brand = $("#brandSelect")?.value || "all";
        renderProductGrid({
          products: WATCHES,
          gridEl: $("#watchesGrid"),
          resultsEl: $("#resultsText"),
          query: q,
          sort,
          brand,
        });
      }

      // Upcoming render
      function renderUpcoming() {
        const q = ($("#upSearchInput").value || "").trim().toLowerCase();
        const sort = $("#upSortSelect").value;
        renderProductGrid({
          products: UPCOMING_WATCHES,
          gridEl: $("#upcomingGrid"),
          resultsEl: $("#upcomingResultsText"),
          query: q,
          sort,
        });
      }

      // -----------------------------
      // Auth (same as before)
      // -----------------------------
      function openAuth(mode) {
        $("#authModal").classList.add("open");
        $("#authModal").setAttribute("aria-hidden", "false");
        setAuthMode(mode);
      }
      function closeAuth() {
        $("#authModal").classList.remove("open");
        $("#authModal").setAttribute("aria-hidden", "true");
        clearAuthErrors();
      }
      function setAuthMode(mode) {
        const isLogin = mode === "login";
        $("#authTitle").textContent = isLogin ? "Login" : "Register";
        $("#loginForm").style.display = isLogin ? "grid" : "none";
        $("#registerForm").style.display = isLogin ? "none" : "grid";
        clearAuthErrors();
      }
      function setText(id, txt) { $(id).textContent = txt; }
      function clearAuthErrors() {
        ["#loginEmailErr","#loginPasswordErr","#loginMsg","#regNameErr","#regEmailErr","#regPasswordErr","#regConfirmErr","#regMsg"]
          .forEach((id) => setText(id, ""));
      }
      function isValidEmail(email) { return /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(email); }
      function isStrongPassword(pw) { return /^(?=.*\d).{8,}$/.test(pw); }

      function updateAuthUI() {
        const pill = $("#authPill");
        const logoutBtn = $("#logoutBtn");
        if (currentUser) {
          pill.style.display = "inline-flex";
          pill.innerHTML = `<i class="fa-solid fa-user" aria-hidden="true"></i> ${currentUser.name}`;
          logoutBtn.style.display = "inline-flex";
        } else {
          pill.style.display = "none";
          pill.textContent = "";
          logoutBtn.style.display = "none";
        }
      }

      function registerUser({ name, email, password }) {
        const users = loadUsers();
        const exists = users.some((u) => u.email.toLowerCase() === email.toLowerCase());
        if (exists) return { ok: false, message: "Email already registered." };
        users.push({ name, email, password });
        saveUsers(users);
        return { ok: true };
      }

      function loginUser({ email, password }) {
        const users = loadUsers();
        const u = users.find((x) => x.email.toLowerCase() === email.toLowerCase());
        if (!u) return { ok: false, message: "No user found. Please register first." };
        if (u.password !== password) return { ok: false, message: "Wrong password." };
        return { ok: true, user: { name: u.name, email: u.email } };
      }

      // Smooth nav
      function smoothScrollTo(hash) {
        const el = document.querySelector(hash);
        if (!el) return;
        el.scrollIntoView({ behavior: "smooth", block: "start" });
      }
      function setActiveNav() {
        const sections = ["#home", "#watches", "#upcoming", "#features"]
          .map((id) => document.querySelector(id))
          .filter(Boolean);
        const y = window.scrollY + 130;
        let activeId = "#home";
        for (const s of sections) {
          if (s.offsetTop <= y) activeId = "#" + s.id;
        }
        $$("a[data-link]").forEach((a) => {
          a.classList.toggle("active", a.getAttribute("href") === activeId);
        });
      }

      // -----------------------------
      // EVENTS
      // -----------------------------
      function wireEvents() {
        // Theme toggle
        $("#themeToggle")?.addEventListener("click", toggleTheme);

        // Mobile menu
        $("#mobileMenuBtn")?.addEventListener("click", openMobileMenu);
        $("#closeMenuBtn")?.addEventListener("click", closeMobileMenu);
        $("#menuOverlay")?.addEventListener("click", closeMobileMenu);
        $("#mobileMenu")?.addEventListener("click", (e) => {
          const a = e.target.closest("a");
          if (a) closeMobileMenu();
        });
        $("#mobileLoginLink")?.addEventListener("click", (e) => { e.preventDefault(); closeMobileMenu(); openAuth("login"); });
        $("#mobileRegisterLink")?.addEventListener("click", (e) => { e.preventDefault(); closeMobileMenu(); openAuth("register"); });

        $("#shopNowBtn").addEventListener("click", () => {
          smoothScrollTo("#watches");
          const title = $("#watches .section-title");
          title.classList.add("pulse");
          setTimeout(() => title.classList.remove("pulse"), 900);
        });

        $$("a[data-link]").forEach((a) => {
          a.addEventListener("click", (e) => {
            e.preventDefault();
            smoothScrollTo(a.getAttribute("href"));
            closeMobileMenu();
          });
        });

        // Featured controls
        $("#searchInput").addEventListener("input", renderFeatured);
        $("#brandSelect").addEventListener("change", renderFeatured);
        $("#sortSelect").addEventListener("change", renderFeatured);
        $("#clearBtn").addEventListener("click", () => {
          $("#searchInput").value = "";
          $("#brandSelect").value = "all";
          $("#sortSelect").value = "featured";
          renderFeatured();
          toast("Cleared");
        });

        // Upcoming controls
        $("#upSearchInput").addEventListener("input", renderUpcoming);
        $("#upSortSelect").addEventListener("change", renderUpcoming);
        $("#upClearBtn").addEventListener("click", () => {
          $("#upSearchInput").value = "";
          $("#upSortSelect").value = "featured";
          renderUpcoming();
          toast("Cleared");
        });

        // Featured grid click
        $("#watchesGrid").addEventListener("click", (e) => {
          const btn = e.target.closest("button[data-action]");
          if (!btn) return;
          const card = e.target.closest(".card[data-id]");
          if (!card) return;

          const id = card.getAttribute("data-id");
          const action = btn.getAttribute("data-action");
          if (action === "add") { addToCart(id); openCart(); }
          if (action === "details") { openDetails(id); }
        });

        // Upcoming grid click
        $("#upcomingGrid").addEventListener("click", (e) => {
          const btn = e.target.closest("button[data-action]");
          if (!btn) return;
          const card = e.target.closest(".card[data-id]");
          if (!card) return;

          const id = card.getAttribute("data-id");
          const action = btn.getAttribute("data-action");
          if (action === "add") { addToCart(id); openCart(); }
          if (action === "details") { openDetails(id); }
        });

        // Cart open/close
        $("#openCartBtn").addEventListener("click", openCart);
        $("#closeCartBtn").addEventListener("click", closeCart);
        $("#overlay").addEventListener("click", closeCart);

        // Cart item controls
        $("#cartItems").addEventListener("click", (e) => {
          const btn = e.target.closest("button[data-action]");
          if (!btn) return;
          const item = e.target.closest(".cart-item[data-id]");
          if (!item) return;

          const id = item.getAttribute("data-id");
          const action = btn.getAttribute("data-action");
          const current = cart[id]?.qty || 0;

          if (action === "inc") setQty(id, current + 1);
          if (action === "dec") setQty(id, current - 1);
          if (action === "remove") setQty(id, 0);
        });

        // Checkout requires login (demo)
        $("#checkoutBtn").addEventListener("click", () => {
          if (getCartCount() === 0) return toast("Cart is empty");
          if (!currentUser) { toast("Please login to checkout"); openAuth("login"); return; }
          toast("Checkout (demo) ✅");
        });

        // Details modal
        $("#closeDetailsBtn").addEventListener("click", closeDetails);
        $("#detailsBackdrop").addEventListener("click", closeDetails);
        $("#pdCartBtn").addEventListener("click", () => { closeDetails(); openCart(); });
        $("#pdThumbs").addEventListener("click", (e) => {
          const t = e.target.closest(".pd-thumb[data-idx]");
          if (!t) return;
          currentImgIndex = Number(t.getAttribute("data-idx"));
          renderDetails();
        });

        // Auth open via nav
        $("#loginLink").addEventListener("click", (e) => { e.preventDefault(); openAuth("login"); });
        $("#registerLink").addEventListener("click", (e) => { e.preventDefault(); openAuth("register"); });

        // Auth close + switch
        $("#closeAuthBtn").addEventListener("click", closeAuth);
        $("#authBackdrop").addEventListener("click", closeAuth);
        $("#goRegister").addEventListener("click", () => setAuthMode("register"));
        $("#goLogin").addEventListener("click", () => setAuthMode("login"));

        // Logout
        $("#logoutBtn").addEventListener("click", () => {
          currentUser = null;
          clearCurrentUser();
          updateAuthUI();
          toast("Logged out");
        });

        // Auth submit
        $("#loginForm").addEventListener("submit", (e) => {
          e.preventDefault();
          clearAuthErrors();

          const email = ($("#loginEmail").value || "").trim();
          const password = $("#loginPassword").value || "";

          let ok = true;
          if (!email) { setText("#loginEmailErr", "Email is required."); ok = false; }
          else if (!isValidEmail(email)) { setText("#loginEmailErr", "Enter valid email."); ok = false; }
          if (!password) { setText("#loginPasswordErr", "Password is required."); ok = false; }
          else if (password.length < 8) { setText("#loginPasswordErr", "Password must be at least 8 characters."); ok = false; }
          if (!ok) return;

          const res = loginUser({ email, password });
          if (!res.ok) { setText("#loginPasswordErr", res.message); toast(res.message); return; }

          currentUser = res.user;
          saveCurrentUser(currentUser);
          updateAuthUI();
          setText("#loginMsg", "Login successful ✅");
          toast("Welcome!");
          setTimeout(closeAuth, 700);
        });

        $("#registerForm").addEventListener("submit", (e) => {
          e.preventDefault();
          clearAuthErrors();

          const name = ($("#regName").value || "").trim();
          const email = ($("#regEmail").value || "").trim();
          const password = $("#regPassword").value || "";
          const confirm = $("#regConfirm").value || "";

          let ok = true;
          if (!name) { setText("#regNameErr", "Name is required."); ok = false; }
          else if (name.length < 2) { setText("#regNameErr", "Name must be at least 2 letters."); ok = false; }
          if (!email) { setText("#regEmailErr", "Email is required."); ok = false; }
          else if (!isValidEmail(email)) { setText("#regEmailErr", "Enter valid email."); ok = false; }
          if (!password) { setText("#regPasswordErr", "Password is required."); ok = false; }
          else if (!isStrongPassword(password)) { setText("#regPasswordErr", "Min 8 chars + at least 1 number."); ok = false; }
          if (!confirm) { setText("#regConfirmErr", "Confirm password is required."); ok = false; }
          else if (confirm !== password) { setText("#regConfirmErr", "Passwords do not match."); ok = false; }
          if (!ok) return;

          const res = registerUser({ name, email, password });
          if (!res.ok) { setText("#regEmailErr", res.message); toast(res.message); return; }

          setText("#regMsg", "Account created ✅ Now login.");
          toast("Registered successfully");
          setTimeout(() => setAuthMode("login"), 650);
        });

        // Help (footer)
        $("#helpFab")?.addEventListener("click", () => {
          document.querySelector("footer")?.scrollIntoView({ behavior: "smooth", block: "start" });
          toast("Need help? See footer links");
        });
        $("#whatsAppLink")?.addEventListener("click", (e) => {
          e.preventDefault();
          toast("WhatsApp link demo");
        });

        // Escape closes everything
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape") {
            closeCart();
            closeAuth();
            closeDetails();
            closeMobileMenu();
          }
        });

        window.addEventListener("scroll", setActiveNav, { passive: true });
      }

      // -----------------------------
      // Init
      // -----------------------------
      function init() {
        $("#year").textContent = new Date().getFullYear();

        // Apply saved/system theme before first paint
        setTheme(loadTheme());

        renderFeatured();
        renderUpcoming();
        renderCart();
        wireEvents();
        setActiveNav();
        updateAuthUI();
      }

      init();
    </script>
  </body>
</html>